<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>spr_playermask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init
image_speed = 0

init_keys()

onground = true
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init room

//show_message("RH:"+string(room_height)+"-RD:"+string(global.room_depth))
global.view_y  -= global.room_depth
global.refreshlist = ds_list_create()
with(all){
    if(persistent){//Aka, only if came from previous room
        y -= global.room_depth
    }
    else{
        ds_list_add(global.refreshlist,id)
    }
}
//Create copies of all instances from this room
while(!ds_list_empty(global.refreshlist)){
    pop = ds_list_find_value(global.refreshlist,0)
    ds_list_delete(global.refreshlist,0)
    with(pop){
        n = instance_create(x,y,object_index)
        n.image_xscale = image_xscale
        n.image_index  = image_index
        instance_destroy()
    }
}
ds_list_destroy(global.refreshlist)

room_speed = 60
view_visible[0] = true
view_wview[0]   = 640
view_wport[0]   = 640
view_hview[0]   = 480
view_hport[0]   = 480
view_yview[0]   = global.view_y

background_showcolor = false

view_visible[1] = true
view_wview[1]   = 1280
view_wport[1]   = 128
view_hview[1]   = 4800
view_hport[1]   = 480
view_xview[1]   = -320
view_yview[1]   = global.view_y

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Turn off persistence
with(all){
    if(!persistent){
        effect_create_above(ef_ring,xstart,ystart,0,c_red)
    }
    persistent = false
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Get keys
get_keys()
onground = place_meeting(x,y + 1,parent_terrain)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Motion
if(alarm[0]){
    vspeed = 0
    exit
}
//Move left/right
if(k_d &amp;&amp; onground){
   n = instance_create(x,y + 8,obj_playerdrill)
   n.image_angle = 270 + random_range(-5,5) 
}
else if(k_l){
    if(!place_meeting(x - 2,y,parent_terrain)){
        x -= 2
    }
    image_xscale = -1
    if(onground){
       n = instance_create(x - 8,y,obj_playerdrill)
       n.image_angle = 180 + random_range(-5,5) 
    }
}
else if(k_r){
    if(!place_meeting(x + 2,y,parent_terrain)){
        x += 2
    }
    image_xscale = 1
    if(onground){
       n = instance_create(x + 8,y,obj_playerdrill)
       n.image_angle = 0 + random_range(-5,5) 
    }
}

//Jump
if(k_j &amp;&amp; onground){
    onground = false
    vspeed   = -4
}

//Gravity
if(!onground){
    vspeed = min(8,vspeed + 0.2)
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///View control
if(alarm[0]){exit}
if(y &gt; view_yview[0] + view_hview[0]*0.5){
    view_yview[0] += 2
    global.back_y += 1
    if(global.back_y &gt;= 128){
        global.back_y -= 128
    }
    if(view_yview[0] &gt;= room_height - view_hview[0]){
        global.room_depth = room_height
        //Clear away irrelevant level stuff
        with(grandparent_levelstuff){
            if(y &lt; view_yview - 128){
                instance_destroy()
            }
        }
        //Move on to next room
        with(all){
            persistent = true
        }
        global.view_y  = view_yview[0]
        room_goto(select_next_roomchunk())
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="parent_terrain">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Cheap collision code
move_contact_solid(direction,speed)
vspeed = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init room start stuff
alarm[0] = 2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw + debuh
draw_self()
draw_set_color(c_white)
draw_rectangle(8,8,room_width-8,room_height-8,true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="82">
      <action>
        <libid>1</libid>
        <id>331</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_restart_game</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,16</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
